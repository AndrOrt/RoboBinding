<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<meta name="keywords" content="presentation model, android mvc, mvvm, mvp, android, binding, android binding, android-binding, Bindroid, MvvmCross, android mvvm" />
<title>Insight Into Framework</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}

/*
 * Extra Custom Styles.
 *
 * */

  #menu {
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: #d5e3aa;
  }

  .menuitem {
    padding: 0.5em;
  }


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
<!-- google analytics start -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51108408-2', 'robobinding.github.io');
  ga('send', 'pageview');

</script>
<!-- google analytics end -->
</head>
<body class="article">
        <h1><span class="image">
        <img src="images/robobinding_logo.png" alt="RoboBinding logo" width="40" height="40" title="RoboBinding" />
        </span> RoboBinding
        <script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
        <a href="https://twitter.com/robobinding" class="twitter-follow-button" data-show-count="false">Follow @robobinding</a>
        <iframe src="http://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Frobobinding&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=true&amp;share=false&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px;" allowTransparency="true"></iframe>
        </h1>

        <div id="menu">
                <a href="index.html" class="menuitem">Home</a>
                <a href="getting_started.html" class="menuitem">Getting Started</a>
                <a href="insight_into_framework.html" class="menuitem">Insight Into Framework</a>
                <a href="https://oss.sonatype.org/service/local/repositories/releases/archive/org/robobinding/robobinding/0.8.11/robobinding-0.8.11-javadoc.jar/!/index.html" class="menuitem">API and Binding Attributes JavaDocs</a>
                <a href="about.html" class="menuitem">About</a>
                <a href="versions.html" class="menuitem">Versions</a>
                <a href="index.zh.html" class="menuitem">Chinese中文</a>
        </div>
<div id="header">
<h1>Insight Into Framework</h1>
<span id="revnumber">version 0.8.9</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_set_up_eclipse_development_environment">1. Set up Eclipse development environment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eclipse_and_plug_in_installation">1.1. Eclipse and plug-in installation</h3>
<div class="ulist"><ul>
<li>
<p>
<a href="http://www.eclipse.org/">Eclipse</a> IDE for Java Developers or a superset(Use Kepler Packages or an older one, as AJDT only supports up till Kepler at the moment).
</p>
</li>
<li>
<p>
Install <a href="http://www.eclipse.org/ajdt/">AspectJ Development Tools (AJDT)</a> plugin ( As part of the project code is written with AspcectJ)
</p>
</li>
<li>
<p>
Install <a href="https://github.com/spring-projects/eclipse-integration-gradle">Gradle Integration for Eclipse</a>, and make some changes to Gradle settings as follows.
</p>
</li>
</ul></div>
<div class="imageblock">
<div class="content">
<img src="./images/eclipse_gradle_settings.png" alt="Eclipse Gradle settings" />
</div>
<div class="title">Figure 1. Eclipse Gradle settings</div>
</div>
</div>
<div class="sect2">
<h3 id="_import_project">1.2. Import project</h3>
<div class="paragraph"><p>Firstly download the project. The project can be downloaded through Eclipse eGit , Git command line or other Git clients. Here is <a href="https://github.com/RoboBinding/RoboBinding">the Project</a>.</p></div>
<div class="paragraph"><p>After the project is downloaded to local, follow the steps below to import into Eclipse:</p></div>
<div class="ulist"><ul>
<li>
<p>
Goto the root directory of the project in command line, and run <em>gradlew framework:cleanEclipse framework:eclipse</em>.
</p>
</li>
<li>
<p>
In Eclipse, follow the Import <em>Existing Projects into Workspace</em> wizard to import the framework sub-project. After imported, the project should look similar to the screen shot below.
</p>
</li>
<li>
<p>
If you are interested in source code generation, you can import codegen sub-project in the same way.
</p>
</li>
</ul></div>
<div class="imageblock">
<div class="content">
<img src="./images/eclipse_robobinding.png" alt="eclipse_robobinding.png" />
</div>
<div class="title">Figure 2. RoboBinding project in Eclipse</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_robobinding_architecture_and_implementation">2. RoboBinding architecture and implementation</h2>
<div class="sectionbody">
<div class="paragraph"><p>RoboBinding is a data-binding <a href="http://martinfowler.com/eaaDev/PresentationModel.html">Presentation Model</a> framework for the Android platform.
The aim of the project is to reduce the workload of Android application development, promote a clear project structure and make the project easier to test.</p></div>
<div class="sect2">
<h3 id="_observing_from_robobinding_overall_implementation">2.1. Observing from RoboBinding overall implementation</h3>
<div class="paragraph"><p>In the following section, a package start with <em>.</em> is a relative path to org.robobinding.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/architecture.png" alt="architecture.png" />
</div>
<div class="title">Figure 3. RoboBinding overall implementation chart</div>
</div>
<div class="paragraph"><p>The above shows the overall implementation of the RoboBinding framework. The two blocks with yellow background (The Client and the PresentationModel) are the application code,
and the three others are the framework code. Note that the figure only shows some core classes from a number of RoboBinding packages.
A client(can be a Activity, a Fragment or a Menu) passes a layout to a ViewBinder(or MenuBinder).
Then the ViewBinder inflates the given layout file to construct a view hierarchy(with the assistance of android.view.LayoutInflater) and extracts binding information.
A root view may contain several sub-views, and a sub-view may have its child views, forming a tree structure. Each view may contain several view binding attributes.
RoboBinding defines three types of view binding attributes, namely .viewattribute.property.[XX]PropertyViewAttribute,
.viewattribute.event.EventViewAttribute, and .viewattribute.grouped.GroupedViewAttribute.</p></div>
<div class="paragraph"><p>A [XX]PropertyViewAttribute implements the binding between a view attribute and a property of a PresentationModel.
A EventViewAttribute implements the binding between a view event and a method of a PresentationModel.
A GroupedViewAttribute, or a composite view binding attribute, consists of a number of sub-attributes, which can be PropertyViewAttributes and EventViewAttributes.
A PropertyViewAttribute is mapped to a property or a dataset-property of the PresentationModel through a .property.PropertyValueModel(when it is a simple property)
or a .property.DataSetValueModel(when it is a complicated dataset property) of the .presentationmodel.PresentationModelAdapter.
A EventViewAttribute is mapped to a method of the PresentationModel through a .function.Function of the PresentationModelAdapter.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/architecture_sample.png" alt="architecture_sample.png" />
</div>
<div class="title">Figure 4. Demonstrating RoboBinding internal running follow through an example</div>
</div>
<div class="paragraph"><p>The chart above summarizes RoboBinding internal running follow through an example.
The three blocks with yellow background are taken from <a href="https://github.com/RoboBinding/RoboBinding-album-sample">RoboBinding-album-sample</a> project&#8217;s source code with slight modification,
while the other two are the instances of some core classes from the framework.
ViewAlbumsActivity binds the layout to its presentationModel with the help of the framework(here is .binder.Binders class).</p></div>
<div class="paragraph"><p>The part with the numbering [1] is an example of a simple view binding attribute(namely .viewattribute.property.PropertyViewAttribute).
The framework creates a .widget.textview.TextAttribute instance for <code>{windowsTitle}</code>,
and then the TextAttribute instance binds <code>{windowTitle}</code> to ViewAlbumsPresentationModel.windowTitle through a PropertyValueModel from the PresentationModelAdapter.</p></div>
<div class="paragraph"><p>The part with the numbering [2] is an example of a composite view binding attribute(namely .viewattribute.grouped.GroupedViewAttribute).
Its child attributes of the source and the itemLayout form a composite ListView binding attribute.
The framework creates a composite view attribute instance, a .widget.adapterview.AdaptedDataSetAttributes, for <code>{albums}</code> and<code>@layout/album_row</code>.
The composite view attribute contains two sub-view attributes, namely .widget.adapterview.SourceAttribute and .widget.adapterview.StaticLayoutAttribute,
which map to <code>{albums}</code> and <code>@layout/album_row</code> respectively.
The SourceAttribute instance binds <code>{albums}</code> to ViewAlbumsPresentationModel.albums with the help of a DataSetValueModel of the PresentationModelAdapter.
The StaticLayoutAttribute links to the external file album_row.xml by parsing <code>@layout/album_row</code>.</p></div>
<div class="paragraph"><p>The third one is an example of an event binding attribute(namely .viewattribute.event.EventViewAttribute).
The framework creates a .widget.view.OnClickAttribute instance for <code>createAlbum</code>,
and then the OnClickAttribute binds <code>createAlbum</code> to ViewAlbumsPresentationModel.createAlbum through a Function of the PresentationModelAdapter.</p></div>
</div>
<div class="sect2">
<h3 id="_observing_from_robobinding_implementation_details">2.2. Observing from RoboBinding implementation details</h3>
<div class="sect3">
<h4 id="_implementing_view_inflation_and_binding">2.2.1. Implementing view inflation and binding</h4>
<div class="paragraph"><p>The classes that implement view inflation and binding are in org.robobinding and org.robobinding.binder packages.
In the following section, a package start with <em>.</em> is a relative path to org.robobinding.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/developer_usecase_sequence.png" alt="developer_usecase_sequence.png" />
</div>
</div>
<div class="paragraph"><p>As shown above, application developers can use the framework in two potential ways(shown in two different colours),
either through the utility class .binder.Binders or .binder.BinderFactoryBuilder(with customization capability).
In either way, the final actual entry class is the same, BinderFactory.
From BinderFactory, an instance of ViewBinder is created, which fulfils layout inflation and binding.
Let us have a look at layout inflation process in the next.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/inflateview_sequence.png" alt="inflateview_sequence.png" />
</div>
</div>
<div class="paragraph"><p>The figure shows the layout inflation process and the core classes involved.
Carrying on with the ViewBinder mentioned above, it further passes the layout inflation task to .binder.BindingViewInflater
and the latter propagate to org.robobinding.NonBindingViewInflater. The only responsibility of NonBindingViewInflater is to inflate layout, constructing the view hierarchy from the given layout.
When a view is created during inflation, a callback with view attributes to the BindingViewInflater is fired,
and out of these view attributes, the BindingViewInflater builds a set of pending view binding attributes, org.robobinding.PendingAttributesForView,
with the help of .binder.BindingAttributeParser.
Repeating the process, until all PendingAttributesForViews are parsed from the layout.</p></div>
<div class="paragraph"><p>Then the PendingAttributesForViews are passed to .binder.BindingAttributeResolver, which further tries to resolve them.
BindingAttributeResolver uses .binder.ByBindingAttributeMappingResolverFinder to find a set of matched view binding attribute mapping resolver, .binder.ByBindingAttributeMappingResolver, according to the view hierarchy from top to bottom
(e.g., android.widget.EditText inherits from android.widget.TextView, and TextView inherits from android.view.View. So a EditText instance matches three ByBindingAttributeMappingResolvers:
A EditText ByBindingAttributeMappingResolver, a TextView ByBindingAttributeMappingResolver and a view ByBindingAttributeMappingResolver in order).
BindingAttributeResolver calls all the matched ByBindingAttributeMappingResolvers in order to get a final set of .binder.ResolvedBindingAttributesForViews and then returns to the BindingViewInflater.</p></div>
<div class="paragraph"><p>Afterwards, the BindingViewInflater add all the predefined pending attribute mappings, org.robobinding.PredefinedPendingAttributesForView, if there is.
And then call BindingAttributeResolver to resolve them also, which follows the same process as resolving PendingAttributesForView above.
Finally it gets a set of ResolvedBindingAttributesForViews as well.</p></div>
<div class="paragraph"><p>The BindingViewInflater eventually hands a .binder.InflatedView containing all the ResolvedBindingAttributesForViews over to ViewBinder.
The whole layout inflation work ends and the next binding stage starts.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/bindview_sequence.png" alt="bindview_sequence.png" />
</div>
</div>
<div class="paragraph"><p>The figure shows the entire binding process and the core classes involved. The ViewBinder hands the binding task to its ViewBindingLifecycle. The ViewBindingLifecycle runs the binding life-cycle on the InflatedView. Firstly try to bind all the ResolvedBindingAttributesForViews in the InflatedView.
Internally the ResolvedBindingAttributesForViews invoke each of its binding attributes to complete the binding.
After completion of the binding, the ViewBindingLifecycle validates the result. When an error is found, the whole process is terminated and the errors are reported.
If successful with no errors, pre-initializing the views is kicked off when specified.
Pre-initializing views is to synchronize values from a PresentationModel to its views.</p></div>
</div>
<div class="sect3">
<h4 id="_implementing_view_attribute_bindings">2.2.2. Implementing view attribute bindings</h4>
<div class="paragraph"><p>View attribute bindings are implemented by org.robobinding.viewattribute and its sub package. In the following section, a package start with <em>.</em> is a relative path to org.robobinding.viewattribute.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/viewattribute_hierarchy.png" alt="viewattribute_hierarchy.png" />
</div>
<div class="title">Figure 5. ViewAttribute class hierarchy diagram</div>
</div>
<div class="paragraph"><p>There are three types of view attributes defined in the framework, namely a simple view attribute .property.PropertyViewAttribute,
an event view attribute .event.EventViewAttribute and a composite view attribute .grouped.GroupedViewAttribute.</p></div>
<div class="paragraph"><p>A PropertyViewAttribute implements binding for a simple view attribute.
There are two kinds, which are single value-typed, property.PropertyViewAttribute, and multiple value-typed, property.MultiTypePropertyViewAttribute.
A PropertyViewAttribute(in the figure with [1.1]marked, <code>{enabledSwitch}</code> and <code>{selectedSwitch}</code>)
has only one possible value type such as EnabledAttribute(org.robobinding.widget.view.EnabledAttribute), having only one value type of Boolean.
Whereas MultiTypePropertyViewAttribute(in the figure with [1.2] marked, <code>{visibilitySwitch}</code>)
has multiple value types such as VisibilityAttribute(org.robobinding.widget.view.VisibilityAttribute), which can be a Integer or a Boolean.</p></div>
<div class="paragraph"><p>A EventViewAttribute(in the figure with [2] marked, <code>onClick</code> and <code>onLongClick</code>) implements binding for a event view attribute,
e.g., org.robobinding.widget.view.OnClickAttribute/OnLongClickAttribute and so on.</p></div>
<div class="paragraph"><p>GroupedViewAttribute(in the figure with [3.1, 3.2] marked, <code>{source}</code>, <code>@layout/item_row</code> and <code>{[text1.text:{name}]}</code>; <code>@layout/footer_layout</code>, <code>{footer}</code> and <code>{footerVisibility}</code>)
implements binding for a composite view attribute such as a org.robobinding.widget.adapterview.AdaptedDataSetAttributes which contains sub-attributes a source, an itemLayout and an optional itemMapping;
a org.robobinding.widget.listview.FooterAttributes, which contains sub-attributes a footerLayout and two optional attributes, a footerPresentationModel and a footerVisibility.</p></div>
<div class="paragraph"><p>org.robobinding.viewattribute package contains abstract classes of core concepts for view attributes, and org.robobinding.widget package contains various counterpart view attribute binding implementations for android.widget package.
For example, org.robobinding.widget.textview package is for android.widget.TextView and org.robobinding.widget.seekbar package is for android.widget.SeekBar.</p></div>
<div class="paragraph"><p>All kinds of view attributes have corresponding Binder classes. They work together to accomplish the binding task.
For example, the counterpart of EventViewAttribute is EventViewAttributeBinder.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/childviewattribute_relationship.png" alt="childviewattribute_relationship.png" />
</div>
<div class="title">Figure 6. ChildViewAttributes class diagram</div>
</div>
<div class="paragraph"><p>In the following section, a package start with <em>.</em> is a relative path to org.robobinding.viewattribute.</p></div>
<div class="paragraph"><p>The figure shows the relationship between a composite view attribute .grouped.GroupedViewAttribute and its child view attributes.
A GroupedViewAttribute contains various types of child view attributes. Currently the kinds of child view attributes in use are .grouped.ChildViewAttribute,
.grouped.DependentChildViewAttribute, .property.PropertyViewAttribute and .property.MultiTypePropertyViewAttribute.</p></div>
<div class="paragraph"><p>A ChildViewAttribute is an ordinary child view attribute and it has a subclass of .grouped.ChildViewAttributeWithAttribute.
A ChildViewAttributeWithAttribute is a ChildViewAttribute but with a required attribute value, which will be set when the ChildViewAttributeWithAttribute is created,
such as org.robobinding.widget.adapterview.SourceAttribute/SubViewLayoutAttribute.</p></div>
<div class="paragraph"><p>DependentChildViewAttribute is a dependent child view attribute. It cannot be created in an ordinary way, as it depends on some runtime information from previous child attributes.
It is, therefore, created via a .grouped.ChildViewAttributeFactory.
Take org.robobinding.widget.adapterview.SubViewAttributes.SubViewAttributeFactory for example.
It needs subViewLayoutAttribute.getLayoutId() to create a SubViewAttribute.</p></div>
<div class="paragraph"><p>PropertyViewAttribute and MultiTypePropertyViewAttribute are single value-typed and multi value-typed view attributes. They are already discussed earlier, and can be reused here as a child view attribute.</p></div>
</div>
<div class="sect3">
<h4 id="_implementing_presentation_model_concepts">2.2.3. Implementing Presentation Model concepts</h4>
<div class="paragraph"><p>In the following section, a package start with <em>.</em> is a relative path to org.robobinding.</p></div>
<div class="imageblock">
<div class="content">
<img src="./images/presentationmodel_classdiagram.png" alt="presentationmodel_classdiagram.png" />
</div>
<div class="title">Figure 7. PresentationModel class diagram</div>
</div>
<div class="paragraph"><p>The four packages, org.robobinding.presentationmodel, org.robobinding.property, org.robobinding.itempresentationmodel and org.robobinding.function,
are for wrapping a PresentationModel as a .presentationmodel.PresentationModelAdapter, which is used in binding process.
The PresentationModelAdapter is the entry class of the packages.
The framework creates a PresentationModelAdapter instance for each PresentationModel.
Currently, there are two ways for the framework to identify a class as a PresentationModel through .presentation.PresentationModel annotation.</p></div>
<div class="paragraph"><p>A PresentationModelAdapter is created to wrap a PresentationModel and acts as a provider of three pieces of information,
namely wrapping SimpleProperty, DataSetProperty and Method, and then acting as a provider of .property.PropertyValueModel, .property.DataSetValueModel
and .function.Function. On the right hand side of the figure above, the property of <code>windowTitle</code> is a SimpleProperty, the property of <code>albums</code> is a DataSetProperty and <code>createAlbum()</code> is a Method.
DataSetProperty is a data set property. The framework will create a .itempresentationmodel.ItemPresentationModel instance for each data item in the collection.
In the given figure above, an AlbumItemPresentationModel will be created for each album item in albums collection and will be rendered to the screen according to the given row layout of <code>@layout/album_row</code>.</p></div>
</div>
<div class="sect3">
<h4 id="_view_event_listener_aggregates">2.2.4. View event listener aggregates</h4>
<div class="paragraph"><p>The concept of view event listener aggregates(org.robobinding.viewattribute.ViewListeners or its subclasses),
is introduced to provide a workaround of registering multiple event listeners due to the fact that the Android framework can only allow register a single event listener in many cases(e.g., android.view.View.setOnFocusChangeListener).
As an application may need to register multiple event listeners on a same event,
to overcome the old listener not being erased by a new one accidentally, the concept of view event listener aggregate is implemented.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributing">3. Contributing</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
We value code quality. So all source code committed requires to have proper unit tests along with it, especially public methods. If unit tests cannot be supplied for some reasons, explicit comments have to be given.
</p>
</li>
<li>
<p>
RoboBinding source code format needs to be followed, so that it is easier for contributions among us. It is basically Java standard code format.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 0.8.9<br />
Last updated 2015-08-16 10:56:00 
</div>
</div>
</body>
</html>
